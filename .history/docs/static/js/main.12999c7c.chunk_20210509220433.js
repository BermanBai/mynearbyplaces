(this.webpackJsonpmynearbyplaces=this.webpackJsonpmynearbyplaces||[]).push([[0],{35:function(e,t,a){},46:function(e,t,a){},58:function(e,t,a){},59:function(e,t,a){},60:function(e,t,a){},61:function(e,t,a){},63:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a(23),c=a.n(r),s=a(20),i=a(7),o=(a(46),a(1));var l=function(){return Object(o.jsxs)("div",{className:"footer-container",children:["\xa9 Copyright ",(new Date).getFullYear(),", All right"]})},j=a(69),u=a(71);var d=function(){return Object(o.jsxs)(j.a,{bg:"light",expand:"lg",children:[Object(o.jsx)(j.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(o.jsxs)(j.a.Collapse,{id:"basic-navbar-nav",children:[Object(o.jsxs)(u.a,{className:"mr-auto",children:[Object(o.jsx)(u.a.Link,{children:Object(o.jsx)(s.b,{to:"/",children:"Home"})}),Object(o.jsx)(u.a.Link,{children:Object(o.jsx)(s.b,{to:"/place",children:"Add Place"})})]}),Object(o.jsx)(u.a.Link,{children:Object(o.jsx)(s.b,{to:"/signin",children:"Sign In"})}),Object(o.jsx)(u.a.Link,{children:Object(o.jsx)(s.b,{to:"/signup",children:"Sign Up"})})]})]})},b=a(10),h=a(6),p=a.n(h),x=a(13),m=a(12),O=(a(58),a(65)),f=a(41),v=a(66),g=a(39),y=a(40),w="https://jinhanbai-nearbyplaces.herokuapp.com";console.log("baseurl:",w);var k=new(function(){function e(){Object(g.a)(this,e),this.BaseUrl=w}return Object(y.a)(e,[{key:"toUrlQuery",value:function(e){return Object.keys(e||{}).map((function(t){return"".concat(t,"=").concat(e[t])})).join("&")}},{key:"parseUrlParams",value:function(e){var t=(e||window.location.href).split("?"),a=Object(m.a)(t,2)[1];if(!a)return{};var n={};return a.split("&").forEach((function(e){var t=e.split("="),a=Object(m.a)(t,2),r=a[0],c=a[1];n[r]=decodeURIComponent(c)})),n}},{key:"ajax",value:function(){var e=Object(x.a)(p.a.mark((function e(){var t,a,n,r,c,s,i,o,l,j,u,d,b,h,x,m,O=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=O.length>0&&void 0!==O[0]?O[0]:{},a=t.url,n=t.method,r=void 0===n?"get":n,c=t.headers,s=void 0===c?{"content-type":"application/json"}:c,i=t.params,o=t.data,l=this.toUrlQuery(i||{}),j=w+a+(l?"?"+l:""),console.log(j),e.prev=4,u=s,d=this.getValue("userInfo")||{},(b=d.id)&&(u.user_id=b),console.log(u),e.next=11,fetch(j,{method:r,headers:u,body:o});case 11:if(h=e.sent,!(h.status<300)){e.next=19;break}return e.next=16,h.json();case 16:return x=e.sent,console.log(x),e.abrupt("return",x);case 19:return e.next=21,h.text();case 21:return m=e.sent,console.log(m),alert(m),e.abrupt("return",Promise.reject(m));case 27:e.prev=27,e.t0=e.catch(4),console.log(e.t0);case 30:case"end":return e.stop()}}),e,this,[[4,27]])})));return function(){return e.apply(this,arguments)}}()},{key:"getApi",value:function(){var e=Object(x.a)(p.a.mark((function e(t,a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t,a),e.abrupt("return",this.ajax({url:t,method:"get",params:a}));case 2:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"postApi",value:function(){var e=Object(x.a)(p.a.mark((function e(t,a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.ajax({url:t,method:"post",data:JSON.stringify(a||{})}));case 1:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"delay",value:function(){var e=Object(x.a)(p.a.mark((function e(){var t,a=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:1500,e.abrupt("return",new Promise((function(e){setTimeout((function(){e(!0)}),t||1500)})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getValue",value:function(e){var t=window.sessionStorage.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch(a){return null}}},{key:"save",value:function(e,t){t?window.sessionStorage.setItem(e,JSON.stringify(t)):window.sessionStorage.removeItem(e)}}]),e}());var C=function(e){var t=Object(n.useState)(""),a=Object(m.a)(t,2),r=a[0],c=a[1],s=function(){var t=Object(x.a)(p.a.mark((function t(){var a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k.getApi(r?"/place/"+r:"/places");case 2:a=t.sent,e.onSearchResult&&e.onSearchResult(a);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(n.useEffect)((function(){console.log("---------search-------"),s()}),[]),Object(o.jsx)("div",{className:"hero-container",children:Object(o.jsxs)("div",{children:[Object(o.jsx)("h1",{children:"Welcome to MyNearByPlaces"}),Object(o.jsxs)(O.a,{style:{width:"100%"},size:"lg",children:[Object(o.jsx)(O.a.Prepend,{children:Object(o.jsx)(O.a.Text,{id:"inputGroup-sizing-lg",children:"Find"})}),Object(o.jsx)(f.a,{"aria-label":"Large","aria-describedby":"inputGroup-sizing-sm",value:r,onChange:function(e){return c(e.target.value.trim())},placeholder:"restaurants, dentists, shopping malls..."}),Object(o.jsx)(O.a.Append,{children:Object(o.jsx)(v.a,{variant:"secondary",onClick:s,children:"Search"})})]}),Object(o.jsx)("br",{})]})})},N=a(70),S=(a(59),function(e){var t=Object(n.useState)(""),a=Object(m.a)(t,2),r=a[0],c=a[1],s=Object(n.useState)(5),i=Object(m.a)(s,2),l=i[0],j=i[1],u=e.info,d=function(){var t=Object(x.a)(p.a.mark((function t(){var a,n,c,s;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.info,n=a.name,c=a.p_id,t.next=3,k.postApi("/review/".concat(n),{placeid:Number(c),comment:r,rating:l});case 3:s=t.sent,u.list.push(s),e.onClose&&e.onClose();case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),b=u.list;return console.log(u),Object(o.jsx)("div",{className:"dialog",children:Object(o.jsxs)("div",{className:"d-body",children:[Object(o.jsxs)("div",{children:["Place:",Object(o.jsx)("strong",{children:u.name})]}),Object(o.jsx)("div",{style:{marginTop:"10px"},children:"Review list"}),Object(o.jsx)("div",{className:"review-list",children:b&&b.length>0?Object(o.jsx)("div",{children:b.map((function(e,t){return Object(o.jsxs)("div",{className:"review-item",children:[Object(o.jsxs)("div",{className:"rating-time",children:[Object(o.jsxs)("div",{className:"rating-a",children:["Rating :",e.rating]}),Object(o.jsx)("div",{children:e.create_time})]}),Object(o.jsxs)("div",{className:"comment",children:["Comment: ",e.comment]})]},t)}))}):Object(o.jsx)("div",{style:{textAlign:"center"},children:Object(o.jsx)("h3",{children:"No comment"})})}),Object(o.jsxs)("div",{className:"review",children:[Object(o.jsxs)(N.a.Group,{controlId:"formBasicEmail",children:[Object(o.jsx)(N.a.Label,{children:"Comment"}),Object(o.jsx)(N.a.Control,{type:"text",placeholder:"Enter comment",onChange:function(e){return c(e.target.value.trim())}})]}),Object(o.jsxs)(N.a.Group,{controlId:"formBasicEmail",children:[Object(o.jsx)(N.a.Label,{children:"Rating"}),Object(o.jsxs)("select",{value:l,onChange:function(e){console.log(e.target.value.trim()),j(Number(e.target.value.trim()))},children:[Object(o.jsx)("option",{value:5,children:"5"}),Object(o.jsx)("option",{value:4,children:"4"}),Object(o.jsx)("option",{value:3,children:"3"}),Object(o.jsx)("option",{value:2,children:"2"}),Object(o.jsx)("option",{value:1,children:"1"})]})]}),Object(o.jsxs)("div",{children:[Object(o.jsx)(v.a,{variant:"primary",type:"submit",onClick:d,children:"Add Review"}),Object(o.jsx)(v.a,{className:"d-close",variant:"info",type:"submit",onClick:function(){return e.onClose&&e.onClose()},children:"Close"})]})]})]})})}),I=function(e){var t=e.info;return Object(o.jsxs)("div",{className:"cardItem",children:[Object(o.jsx)("div",{className:"title",children:t.name}),Object(o.jsxs)("div",{className:"address",children:["Address:\u3000",Object(o.jsxs)("span",{children:[t.street," ",t.city," ",t.state]})]}),Object(o.jsxs)("div",{children:["Postalcode: ",t.postalcode]}),Object(o.jsxs)("div",{className:"btns",children:[Object(o.jsx)("div",{className:"other"}),Object(o.jsx)("div",{className:"btn btn-primary btn-sm",onClick:function(){console.log(t),e.onShow&&e.onShow(t)},children:"Detail"})]})]})};var P=function(e){var t=Object(n.useState)(null),a=Object(m.a)(t,2),r=a[0],c=a[1],s=Object(n.useState)([]),i=Object(m.a)(s,2),l=i[0],j=i[1];return console.log("-----home------",r),Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(C,{onSearchResult:function(e){j(e)}}),Object(o.jsx)("div",{className:"body",children:Object(o.jsx)("div",{className:"result",children:l&&l.length>0&&l.map((function(t,a){return Object(n.createElement)(I,Object(b.a)(Object(b.a)({},e),{},{info:t,key:a,onShow:function(){return c(t)}}))}))})}),r&&r.id>0&&Object(o.jsx)(S,Object(b.a)(Object(b.a)({info:r},e),{},{onClose:function(){return c(null)}}))]})},T=(a(60),a(67)),B=a(68),L=a(72);var E=function(){return Object(o.jsxs)(T.a,{className:"review-container",children:[Object(o.jsxs)(N.a,{children:[Object(o.jsxs)(N.a.Group,{controlId:"exampleForm.ControlTextarea1",children:[Object(o.jsx)(N.a.Label,{children:"Add a new review:"}),Object(o.jsx)(N.a.Control,{as:"textarea",rows:3})]}),Object(o.jsx)(v.a,{variant:"secondary",children:"Submit"})]}),Object(o.jsx)("hr",{}),Object(o.jsx)("h2",{children:"Hot Businesses"}),Object(o.jsx)("br",{}),Object(o.jsxs)(B.a,{children:[Object(o.jsxs)(L.a,{children:[Object(o.jsx)(L.a.Img,{variant:"top",src:"../images/coffeeshop.jpeg",alt:"Coffee Shop"}),Object(o.jsxs)(L.a.Body,{children:[Object(o.jsx)(L.a.Title,{children:"Coffee Shop ($$$)"}),Object(o.jsx)(L.a.Text,{className:"card-type",children:"Coffee, Tea, Bakeries"}),Object(o.jsx)(L.a.Text,{className:"card-review",children:'"This coffee shop is so awesome!"'})]}),Object(o.jsx)(L.a.Footer,{children:Object(o.jsx)("small",{className:"text-muted",children:"Last updated 3 mins ago"})})]}),Object(o.jsxs)(L.a,{children:[Object(o.jsx)(L.a.Img,{variant:"top",src:"../images/food-truck.jpeg",alt:"Food Truck"}),Object(o.jsxs)(L.a.Body,{children:[Object(o.jsx)(L.a.Title,{children:"Food Truck ($$)"}),Object(o.jsx)(L.a.Text,{className:"card-type",children:"Food Truck, Pop-Up Restaurants"}),Object(o.jsx)(L.a.Text,{className:"card-review",children:'"This food truck is so awesome!"'})]}),Object(o.jsx)(L.a.Footer,{children:Object(o.jsx)("small",{className:"text-muted",children:"Last updated 3 mins ago"})})]}),Object(o.jsxs)(L.a,{children:[Object(o.jsx)(L.a.Img,{variant:"top",src:"../images/starbucks.jpeg",alt:"Starbucks"}),Object(o.jsxs)(L.a.Body,{children:[Object(o.jsx)(L.a.Title,{children:"Starbucks ($)"}),Object(o.jsx)(L.a.Text,{className:"card-type",children:"Coffee, Bakeries"}),Object(o.jsx)(L.a.Text,{className:"card-review",children:'"This Starbucks is so awesome!"'})]}),Object(o.jsx)(L.a.Footer,{children:Object(o.jsx)("small",{className:"text-muted",children:"Last updated 3 mins ago"})})]})]})]})};a(61);var A=function(e){var t=Object(n.useState)({email:"",password:""}),a=Object(m.a)(t,2),r=a[0],c=a[1],s=function(){var t=Object(x.a)(p.a.mark((function t(){var a,n,c;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=r.email,n=r.password,a&&n){t.next=3;break}return t.abrupt("return");case 3:return console.log("------submit---"),t.next=6,k.postApi("/signin",{email:a,password:n});case 6:c=t.sent,k.save("userInfo",c),console.log(c),e.history.push("/");case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(o.jsxs)(T.a,{className:"signin-container",children:[Object(o.jsx)("h1",{children:"Welcome back!"}),Object(o.jsx)("br",{}),Object(o.jsxs)(N.a,{onSubmit:s,children:[Object(o.jsxs)(N.a.Group,{controlId:"formBasicEmail",children:[Object(o.jsx)(N.a.Label,{children:"Email address"}),Object(o.jsx)(N.a.Control,{type:"email",placeholder:"Enter email",onChange:function(e){c(Object(b.a)(Object(b.a)({},r),{},{email:e.target.value})),console.log(e.target.value.trim())}}),Object(o.jsx)(N.a.Text,{className:"text-muted",children:"We'll never share your email with anyone else."})]}),Object(o.jsxs)(N.a.Group,{controlId:"formBasicPassword",children:[Object(o.jsx)(N.a.Label,{children:"Password"}),Object(o.jsx)(N.a.Control,{type:"password",placeholder:"Password",onChange:function(e){c(Object(b.a)(Object(b.a)({},r),{},{password:e.target.value})),console.log(e.target.value.trim())}})]}),Object(o.jsx)(N.a.Group,{controlId:"formBasicCheckbox",children:Object(o.jsx)(N.a.Check,{type:"checkbox",label:"Remember me"})}),Object(o.jsx)(v.a,{variant:"primary",type:"submit",children:"Submit"})]})]})};a(35);var G=function(e){var t=Object(n.useState)({email:"",password:"",confirmPwd:""}),a=Object(m.a)(t,2),r=a[0],c=a[1];console.log(e);var s=function(){var t=Object(x.a)(p.a.mark((function t(){var a,n,c,s;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=r.email,n=r.password,c=r.confirmPwd,a){t.next=4;break}return alert("email cannot be empty"),t.abrupt("return");case 4:if(n){t.next=7;break}return alert("password cannot be empty"),t.abrupt("return");case 7:if(n===c){t.next=10;break}return alert("Wrong password input twice"),t.abrupt("return");case 10:return t.next=12,k.postApi("/signup",r);case 12:s=t.sent,console.log(s),e.history.push("/signin");case 15:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(o.jsxs)(T.a,{className:"signup-container",children:[Object(o.jsx)("h1",{children:"Sign Up for New User"}),Object(o.jsx)("br",{}),Object(o.jsxs)(N.a,{onSubmit:s,children:[Object(o.jsxs)(N.a.Group,{controlId:"formBasicEmail",children:[Object(o.jsx)(N.a.Label,{children:"Email address"}),Object(o.jsx)(N.a.Control,{type:"email",placeholder:"Enter email",onChange:function(e){return c(Object(b.a)(Object(b.a)({},r),{},{email:e.target.value.trim()}))}}),Object(o.jsx)(N.a.Text,{className:"text-muted",children:"We'll never share your email with anyone else."})]}),Object(o.jsxs)(N.a.Group,{controlId:"formBasicPassword",children:[Object(o.jsx)(N.a.Label,{children:"Password"}),Object(o.jsx)(N.a.Control,{type:"password",placeholder:"Password",onChange:function(e){return c(Object(b.a)(Object(b.a)({},r),{},{password:e.target.value.trim()}))}})]}),Object(o.jsxs)(N.a.Group,{controlId:"formBasicPassword",children:[Object(o.jsx)(N.a.Label,{children:"Confirm Password"}),Object(o.jsx)(N.a.Control,{type:"password",placeholder:"Password",onChange:function(e){return c(Object(b.a)(Object(b.a)({},r),{},{confirmPwd:e.target.value.trim()}))}})]}),Object(o.jsx)(v.a,{variant:"primary",type:"submit",children:"Sign Up"})]})]})};var F=function(e){var t=Object(n.useState)({name:"",street:"",city:"",state:"",postalcode:""}),a=Object(m.a)(t,2),r=a[0],c=a[1],s=function(){var e=Object(x.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.postApi("/place",r);case 2:alert("add success"),c({name:"",street:"",city:"",state:"",postalcode:""});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),i=function(e,t){var a=Object(b.a)({},r);a[e]=t.target.value.trim(),c(a)};return Object(o.jsxs)(T.a,{className:"signup-container",children:[Object(o.jsx)("h1",{children:"Add Place"}),Object(o.jsx)("br",{}),Object(o.jsxs)(N.a,{onSubmit:s,children:[Object(o.jsxs)(N.a.Group,{controlId:"formBasicEmail",children:[Object(o.jsx)(N.a.Label,{children:"Place name"}),Object(o.jsx)(N.a.Control,{type:"text",placeholder:"place name",value:r.name,onChange:function(e){return i("name",e)}})]}),Object(o.jsxs)(N.a.Group,{controlId:"formBasicEmail",children:[Object(o.jsx)(N.a.Label,{children:"Street"}),Object(o.jsx)(N.a.Control,{type:"text",placeholder:"enter street",value:r.street,onChange:function(e){return i("street",e)}})]}),Object(o.jsxs)(N.a.Group,{controlId:"formBasicEmail",children:[Object(o.jsx)(N.a.Label,{children:"city"}),Object(o.jsx)(N.a.Control,{type:"text",placeholder:"enter city",value:r.city,onChange:function(e){return i("city",e)}})]}),Object(o.jsxs)(N.a.Group,{controlId:"formBasicEmail",children:[Object(o.jsx)(N.a.Label,{children:"State"}),Object(o.jsx)(N.a.Control,{type:"text",placeholder:"enter state",value:r.state,onChange:function(e){return i("state",e)}})]}),Object(o.jsxs)(N.a.Group,{controlId:"formBasicEmail",children:[Object(o.jsx)(N.a.Label,{children:"Postalcode"}),Object(o.jsx)(N.a.Control,{type:"text",placeholder:"enter postalcode",value:r.postalcode,onChange:function(e){return i("postalcode",e)}})]}),Object(o.jsx)(v.a,{variant:"primary",type:"submit",children:"Add Place"})]})]})};var R=function(){return Object(o.jsxs)(s.a,{basename:"/",children:[Object(o.jsx)(d,{}),Object(o.jsxs)(i.c,{children:[Object(o.jsx)(i.a,{path:"/",exact:!0,component:P}),Object(o.jsx)(i.a,{path:"/review",component:E}),Object(o.jsx)(i.a,{path:"/signin",component:A}),Object(o.jsx)(i.a,{path:"/signup",component:G}),Object(o.jsx)(i.a,{path:"/place",component:F})]}),Object(o.jsx)(l,{})]})};a(62);c.a.render(Object(o.jsx)(R,{}),document.getElementById("root"))}},[[63,1,2]]]);
//# sourceMappingURL=main.12999c7c.chunk.js.map